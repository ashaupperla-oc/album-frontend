{"version":3,"sources":["../../src/composables/items.ts"],"names":["computed","getObjectValueByPath","getPropertyFromItem","propsFactory","makeItemsProps","items","type","Array","default","itemTitle","String","Function","itemValue","itemChildren","itemProps","item","transformItem","props","title","value","children","isArray","transformItems","undefined","array","push","useItems"],"mappings":"AAAA;AACA,SAASA,QAAT,QAAyB,KAAzB;SACSC,oB,EAAsBC,mB,EAAqBC,Y,6BAEpD;;AAmBA;AACA,OAAO,MAAMC,cAAc,GAAGD,YAAY,CAAC;AACzCE,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEC,KADD;AAELC,IAAAA,OAAO,EAAE,MAAO;AAFX,GADkC;AAKzCC,EAAAA,SAAS,EAAE;AACTH,IAAAA,IAAI,EAAE,CAACI,MAAD,EAASH,KAAT,EAAgBI,QAAhB,CADG;AAETH,IAAAA,OAAO,EAAE;AAFA,GAL8B;AASzCI,EAAAA,SAAS,EAAE;AACTN,IAAAA,IAAI,EAAE,CAACI,MAAD,EAASH,KAAT,EAAgBI,QAAhB,CADG;AAETH,IAAAA,OAAO,EAAE;AAFA,GAT8B;AAazCK,EAAAA,YAAY,EAAE;AACZP,IAAAA,IAAI,EAAEI,MADM;AAEZF,IAAAA,OAAO,EAAE;AAFG,GAb2B;AAiBzCM,EAAAA,SAAS,EAAE;AACTR,IAAAA,IAAI,EAAEK,QADG;AAETH,IAAAA,OAAO,EAAGO,IAAD,KAAgB,EAAhB;AAFA;AAjB8B,CAAD,EAqBvC,MArBuC,CAAnC;AAuBP,OAAO,SAASC,aAAT,CAAwBC,KAAxB,EAA0CF,IAA1C,EAAqD;AAAA;;AAC1D,QAAMG,KAAK,GAAGhB,mBAAmB,CAACa,IAAD,EAAOE,KAAK,CAACR,SAAb,EAAwBM,IAAxB,CAAjC;AACA,QAAMI,KAAK,GAAGjB,mBAAmB,CAACa,IAAD,EAAOE,KAAK,CAACL,SAAb,EAAwBM,KAAxB,CAAjC;AACA,QAAME,QAAQ,GAAGnB,oBAAoB,CAACc,IAAD,EAAOE,KAAK,CAACJ,YAAb,CAArC;AAEA,SAAO;AACLK,IAAAA,KADK;AAELC,IAAAA,KAFK;AAGLC,IAAAA,QAAQ,EAAEb,KAAK,CAACc,OAAN,CAAcD,QAAd,IAA0BE,cAAc,CAACL,KAAD,EAAQG,QAAR,CAAxC,GAA4DG,SAHjE;AAIL,4BAAGN,KAAK,CAACH,SAAT,qBAAG,sBAAAG,KAAK,EAAaF,IAAb,CAAR;AAJK,GAAP;AAMD;AAED,OAAO,SAASO,cAAT,CAAyBL,KAAzB,EAA2CZ,KAA3C,EAAsE;AAC3E,QAAMmB,KAAqB,GAAG,EAA9B;;AAEA,OAAK,MAAMT,IAAX,IAAmBV,KAAnB,EAA0B;AACxBmB,IAAAA,KAAK,CAACC,IAAN,CAAWT,aAAa,CAACC,KAAD,EAAQF,IAAR,CAAxB;AACD;;AAED,SAAOS,KAAP;AACD;AAED,OAAO,SAASE,QAAT,CAAmBT,KAAnB,EAAqC;AAC1C,QAAMZ,KAAK,GAAGL,QAAQ,CAAC,MAAMsB,cAAc,CAACL,KAAD,EAAQA,KAAK,CAACZ,KAAd,CAArB,CAAtB;AAEA,SAAO;AAAEA,IAAAA;AAAF,GAAP;AACD","sourcesContent":["// Utilities\nimport { computed } from 'vue'\nimport { getObjectValueByPath, getPropertyFromItem, propsFactory } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { SelectItemKey } from '@/util'\n\nexport interface InternalItem {\n  [key: string]: any\n  title: string\n  value: any\n  children?: InternalItem[]\n}\n\nexport interface ItemProps {\n  items: (string | Partial<InternalItem>)[]\n  itemTitle: SelectItemKey\n  itemValue: SelectItemKey\n  itemChildren: string\n  itemProps: (item: any) => Partial<InternalItem>\n}\n\n// Composables\nexport const makeItemsProps = propsFactory({\n  items: {\n    type: Array as PropType<ItemProps['items']>,\n    default: () => ([]),\n  },\n  itemTitle: {\n    type: [String, Array, Function] as PropType<SelectItemKey>,\n    default: 'title',\n  },\n  itemValue: {\n    type: [String, Array, Function] as PropType<SelectItemKey>,\n    default: 'value',\n  },\n  itemChildren: {\n    type: String,\n    default: 'children',\n  },\n  itemProps: {\n    type: Function as PropType<ItemProps['itemProps']>,\n    default: (item: any) => ({}),\n  },\n}, 'item')\n\nexport function transformItem (props: ItemProps, item: any) {\n  const title = getPropertyFromItem(item, props.itemTitle, item)\n  const value = getPropertyFromItem(item, props.itemValue, title)\n  const children = getObjectValueByPath(item, props.itemChildren)\n\n  return {\n    title,\n    value,\n    children: Array.isArray(children) ? transformItems(props, children) : undefined,\n    ...props.itemProps?.(item),\n  }\n}\n\nexport function transformItems (props: ItemProps, items: ItemProps['items']) {\n  const array: InternalItem[] = []\n\n  for (const item of items) {\n    array.push(transformItem(props, item))\n  }\n\n  return array\n}\n\nexport function useItems (props: ItemProps) {\n  const items = computed(() => transformItems(props, props.items))\n\n  return { items }\n}\n"],"file":"items.mjs"}