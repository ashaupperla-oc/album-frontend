{"version":3,"sources":["../../src/composables/forwardRef.ts"],"names":["useForwardRef","target","refs","Proxy","get","key","Reflect","has","ref","value","val","bind","getOwnPropertyDescriptor","descriptor","obj","Object","getPrototypeOf","undefined"],"mappings":"AAGA,OAAO,SAASA,aAAT,CACLC,MADK,EAG0C;AAAA,oCAD5CC,IAC4C;AAD5CA,IAAAA,IAC4C;AAAA;;AAC/C,SAAO,IAAIC,KAAJ,CAAUF,MAAV,EAAkB;AACvBG,IAAAA,GAAG,CAAEH,MAAF,EAAUI,GAAV,EAAe;AAChB,UAAIC,OAAO,CAACC,GAAR,CAAYN,MAAZ,EAAoBI,GAApB,CAAJ,EAA8B;AAC5B,eAAOC,OAAO,CAACF,GAAR,CAAYH,MAAZ,EAAoBI,GAApB,CAAP;AACD;;AACD,WAAK,MAAMG,GAAX,IAAkBN,IAAlB,EAAwB;AACtB,YAAIM,GAAG,CAACC,KAAJ,IAAaH,OAAO,CAACC,GAAR,CAAYC,GAAG,CAACC,KAAhB,EAAuBJ,GAAvB,CAAjB,EAA8C;AAC5C,gBAAMK,GAAG,GAAGJ,OAAO,CAACF,GAAR,CAAYI,GAAG,CAACC,KAAhB,EAAuBJ,GAAvB,CAAZ;AACA,iBAAO,OAAOK,GAAP,KAAe,UAAf,GACHA,GAAG,CAACC,IAAJ,CAASH,GAAG,CAACC,KAAb,CADG,GAEHC,GAFJ;AAGD;AACF;AACF,KAbsB;;AAcvBE,IAAAA,wBAAwB,CAAEX,MAAF,EAAUI,GAAV,EAAe;AACrC,YAAMQ,UAAU,GAAGP,OAAO,CAACM,wBAAR,CAAiCX,MAAjC,EAAyCI,GAAzC,CAAnB;AACA,UAAIQ,UAAJ,EAAgB,OAAOA,UAAP,CAFqB,CAIrC;;AACA,WAAK,MAAML,GAAX,IAAkBN,IAAlB,EAAwB;AACtB,YAAI,CAACM,GAAG,CAACC,KAAT,EAAgB;AAChB,cAAMI,UAAU,GAAGP,OAAO,CAACM,wBAAR,CAAiCJ,GAAG,CAACC,KAArC,EAA4CJ,GAA5C,CAAnB;AACA,YAAIQ,UAAJ,EAAgB,OAAOA,UAAP;AACjB,OAToC,CAUrC;;;AACA,WAAK,MAAML,GAAX,IAAkBN,IAAlB,EAAwB;AACtB,YAAIY,GAAG,GAAGN,GAAG,CAACC,KAAJ,IAAaM,MAAM,CAACC,cAAP,CAAsBR,GAAG,CAACC,KAA1B,CAAvB;;AACA,eAAOK,GAAP,EAAY;AACV,gBAAMD,UAAU,GAAGP,OAAO,CAACM,wBAAR,CAAiCE,GAAjC,EAAsCT,GAAtC,CAAnB;AACA,cAAIQ,UAAJ,EAAgB,OAAOA,UAAP;AAChBC,UAAAA,GAAG,GAAGC,MAAM,CAACC,cAAP,CAAsBF,GAAtB,CAAN;AACD;AACF;;AACD,aAAOG,SAAP;AACD;;AAlCsB,GAAlB,CAAP;AAoCD","sourcesContent":["import type { Ref, UnwrapRef } from 'vue'\nimport type { UnionToIntersection } from '@/util'\n\nexport function useForwardRef<T extends {}, U extends Ref<{} | undefined>[]> (\n  target: T,\n  ...refs: U\n): T & UnwrapRef<UnionToIntersection<U[number]>> {\n  return new Proxy(target, {\n    get (target, key) {\n      if (Reflect.has(target, key)) {\n        return Reflect.get(target, key)\n      }\n      for (const ref of refs) {\n        if (ref.value && Reflect.has(ref.value, key)) {\n          const val = Reflect.get(ref.value, key)\n          return typeof val === 'function'\n            ? val.bind(ref.value)\n            : val\n        }\n      }\n    },\n    getOwnPropertyDescriptor (target, key) {\n      const descriptor = Reflect.getOwnPropertyDescriptor(target, key)\n      if (descriptor) return descriptor\n\n      // Check each ref's own properties\n      for (const ref of refs) {\n        if (!ref.value) continue\n        const descriptor = Reflect.getOwnPropertyDescriptor(ref.value, key)\n        if (descriptor) return descriptor\n      }\n      // Recursive search up each ref's prototype\n      for (const ref of refs) {\n        let obj = ref.value && Object.getPrototypeOf(ref.value)\n        while (obj) {\n          const descriptor = Reflect.getOwnPropertyDescriptor(obj, key)\n          if (descriptor) return descriptor\n          obj = Object.getPrototypeOf(obj)\n        }\n      }\n      return undefined\n    },\n  }) as any\n}\n"],"file":"forwardRef.mjs"}