{"version":3,"sources":["../../src/composables/resizeObserver.ts"],"names":["onBeforeUnmount","readonly","ref","watch","IN_BROWSER","useResizeObserver","callback","resizeRef","contentRect","observer","ResizeObserver","entries","length","value","disconnect","newValue","oldValue","unobserve","undefined","observe","flush"],"mappings":"AAAA;AACA,SAASA,eAAT,EAA0BC,QAA1B,EAAoCC,GAApC,EAAyCC,KAAzC,QAAsD,KAAtD;AAGA;SACSC,U;AAOT,OAAO,SAASC,iBAAT,CAA4BC,QAA5B,EAA4E;AACjF,QAAMC,SAAS,GAAGL,GAAG,EAArB;AACA,QAAMM,WAAW,GAAGN,GAAG,EAAvB;;AAEA,MAAIE,UAAJ,EAAgB;AACd,UAAMK,QAAQ,GAAG,IAAIC,cAAJ,CAAoBC,OAAD,IAAoC;AACtEL,MAAAA,QAAQ,QAAR,YAAAA,QAAQ,CAAGK,OAAH,EAAYF,QAAZ,CAAR;AAEA,UAAI,CAACE,OAAO,CAACC,MAAb,EAAqB;AAErBJ,MAAAA,WAAW,CAACK,KAAZ,GAAoBF,OAAO,CAAC,CAAD,CAAP,CAAWH,WAA/B;AACD,KANgB,CAAjB;AAQAR,IAAAA,eAAe,CAAC,MAAM;AACpBS,MAAAA,QAAQ,CAACK,UAAT;AACD,KAFc,CAAf;AAIAX,IAAAA,KAAK,CAACI,SAAD,EAAY,CAACQ,QAAD,EAAWC,QAAX,KAAwB;AACvC,UAAIA,QAAJ,EAAc;AACZP,QAAAA,QAAQ,CAACQ,SAAT,CAAmBD,QAAnB;AACAR,QAAAA,WAAW,CAACK,KAAZ,GAAoBK,SAApB;AACD;;AAED,UAAIH,QAAJ,EAAcN,QAAQ,CAACU,OAAT,CAAiBJ,QAAjB;AACf,KAPI,EAOF;AACDK,MAAAA,KAAK,EAAE;AADN,KAPE,CAAL;AAUD;;AAED,SAAO;AACLb,IAAAA,SADK;AAELC,IAAAA,WAAW,EAAEP,QAAQ,CAACO,WAAD;AAFhB,GAAP;AAID","sourcesContent":["// Utilities\nimport { onBeforeUnmount, readonly, ref, watch } from 'vue'\nimport type { DeepReadonly, Ref } from 'vue'\n\n// Globals\nimport { IN_BROWSER } from '@/util/globals'\n\ninterface ResizeState {\n  resizeRef: Ref<Element | undefined>\n  contentRect: DeepReadonly<Ref<DOMRectReadOnly | undefined>>\n}\n\nexport function useResizeObserver (callback?: ResizeObserverCallback): ResizeState {\n  const resizeRef = ref<Element>()\n  const contentRect = ref<DOMRectReadOnly>()\n\n  if (IN_BROWSER) {\n    const observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      callback?.(entries, observer)\n\n      if (!entries.length) return\n\n      contentRect.value = entries[0].contentRect\n    })\n\n    onBeforeUnmount(() => {\n      observer.disconnect()\n    })\n\n    watch(resizeRef, (newValue, oldValue) => {\n      if (oldValue) {\n        observer.unobserve(oldValue)\n        contentRect.value = undefined\n      }\n\n      if (newValue) observer.observe(newValue)\n    }, {\n      flush: 'post',\n    })\n  }\n\n  return {\n    resizeRef,\n    contentRect: readonly(contentRect),\n  }\n}\n"],"file":"resizeObserver.mjs"}