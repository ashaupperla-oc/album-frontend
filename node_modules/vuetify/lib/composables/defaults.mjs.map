{"version":3,"sources":["../../src/composables/defaults.ts"],"names":["computed","inject","provide","ref","unref","mergeDeep","DefaultsSymbol","Symbol","for","createDefaults","options","useDefaults","defaults","Error","provideDefaults","injectedDefaults","providedDefaults","newDefaults","scoped","reset","root","properties","value","prev","len","Number","Infinity","i"],"mappings":"AAAA;AACA,SAASA,QAAT,EAAmBC,MAAnB,EAA2BC,OAA3B,EAAoCC,GAApC,EAAyCC,KAAzC,QAAsD,KAAtD;SACSC,S,+BAET;;AAWA,OAAO,MAAMC,cAAmD,GAAGC,MAAM,CAACC,GAAP,CAAW,kBAAX,CAA5D;AAEP,OAAO,SAASC,cAAT,CAAyBC,OAAzB,EAA4E;AACjF,SAAOP,GAAG,CAACO,OAAD,WAACA,OAAD,GAAY,EAAZ,CAAV;AACD;AAED,OAAO,SAASC,WAAT,GAAwB;AAC7B,QAAMC,QAAQ,GAAGX,MAAM,CAACK,cAAD,CAAvB;AAEA,MAAI,CAACM,QAAL,EAAe,MAAM,IAAIC,KAAJ,CAAU,4CAAV,CAAN;AAEf,SAAOD,QAAP;AACD;AAED,OAAO,SAASE,eAAT,CACLF,QADK,EAELF,OAFK,EAOL;AACA,QAAMK,gBAAgB,GAAGJ,WAAW,EAApC;AACA,QAAMK,gBAAgB,GAAGb,GAAG,CAACS,QAAD,CAA5B;AAEA,QAAMK,WAAW,GAAGjB,QAAQ,CAAC,MAAM;AACjC,UAAMkB,MAAM,GAAGd,KAAK,CAACM,OAAD,oBAACA,OAAO,CAAEQ,MAAV,CAApB;AACA,UAAMC,KAAK,GAAGf,KAAK,CAACM,OAAD,oBAACA,OAAO,CAAES,KAAV,CAAnB;AACA,UAAMC,IAAI,GAAGhB,KAAK,CAACM,OAAD,oBAACA,OAAO,CAAEU,IAAV,CAAlB;AAEA,QAAIC,UAAU,GAAGhB,SAAS,CAACW,gBAAgB,CAACM,KAAlB,EAAyB;AAAEC,MAAAA,IAAI,EAAER,gBAAgB,CAACO;AAAzB,KAAzB,CAA1B;AAEA,QAAIJ,MAAJ,EAAY,OAAOG,UAAP;;AAEZ,QAAIF,KAAK,IAAIC,IAAb,EAAmB;AACjB,YAAMI,GAAG,GAAGC,MAAM,CAACN,KAAK,IAAIO,QAAV,CAAlB;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIH,GAArB,EAA0BG,CAAC,EAA3B,EAA+B;AAC7B,YAAI,CAACN,UAAU,CAACE,IAAhB,EAAsB;AAEtBF,QAAAA,UAAU,GAAGA,UAAU,CAACE,IAAxB;AACD;;AAED,aAAOF,UAAP;AACD;;AAED,WAAOhB,SAAS,CAACgB,UAAU,CAACE,IAAZ,EAAkBF,UAAlB,CAAhB;AACD,GAtB2B,CAA5B;AAwBAnB,EAAAA,OAAO,CAACI,cAAD,EAAiBW,WAAjB,CAAP;AAEA,SAAOA,WAAP;AACD","sourcesContent":["// Utilities\nimport { computed, inject, provide, ref, unref } from 'vue'\nimport { mergeDeep } from '@/util/helpers'\n\n// Types\nimport type { ComputedRef, InjectionKey, Ref } from 'vue'\nimport type { MaybeRef } from '@/util'\n\nexport interface DefaultsInstance {\n  [key: string]: undefined | Record<string, unknown>\n  global?: Record<string, unknown>\n}\n\nexport type DefaultsOptions = Partial<DefaultsInstance>\n\nexport const DefaultsSymbol: InjectionKey<Ref<DefaultsInstance>> = Symbol.for('vuetify:defaults')\n\nexport function createDefaults (options?: DefaultsInstance): Ref<DefaultsInstance> {\n  return ref(options ?? {})\n}\n\nexport function useDefaults () {\n  const defaults = inject(DefaultsSymbol)\n\n  if (!defaults) throw new Error('[Vuetify] Could not find defaults instance')\n\n  return defaults\n}\n\nexport function provideDefaults (\n  defaults?: MaybeRef<DefaultsInstance | undefined>,\n  options?: {\n    reset?: MaybeRef<number | string | undefined>\n    root?: MaybeRef<boolean | undefined>\n    scoped?: MaybeRef<boolean | undefined>\n  }\n) {\n  const injectedDefaults = useDefaults()\n  const providedDefaults = ref(defaults)\n\n  const newDefaults = computed(() => {\n    const scoped = unref(options?.scoped)\n    const reset = unref(options?.reset)\n    const root = unref(options?.root)\n\n    let properties = mergeDeep(providedDefaults.value, { prev: injectedDefaults.value })\n\n    if (scoped) return properties\n\n    if (reset || root) {\n      const len = Number(reset || Infinity)\n\n      for (let i = 0; i <= len; i++) {\n        if (!properties.prev) break\n\n        properties = properties.prev\n      }\n\n      return properties\n    }\n\n    return mergeDeep(properties.prev, properties)\n  }) as ComputedRef<DefaultsInstance>\n\n  provide(DefaultsSymbol, newDefaults)\n\n  return newDefaults\n}\n"],"file":"defaults.mjs"}