{"version":3,"sources":["../../../src/components/VCarousel/VCarousel.tsx"],"names":["VBtn","VDefaultsProvider","VProgressLinear","VWindow","useLocale","useProxiedModel","convertToUnit","defineComponent","useRender","onMounted","ref","watch","VCarousel","name","props","color","String","cycle","Boolean","delimiterIcon","type","default","height","Number","hideDelimiters","hideDelimiterBackground","interval","validator","value","modelValue","progress","showArrows","v","verticalDelimiters","emits","val","setup","slots","model","t","windowRef","slideTimeout","restartTimeout","window","clearTimeout","startTimeout","setTimeout","group","next","requestAnimationFrame","additional","left","right","items","length","icon","size","variant","map","item","class","isSelected","id","onClick","select","undefined","getItemIndex","prev"],"mappings":"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","sourcesContent":["// Styles\nimport './VCarousel.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VProgressLinear } from '@/components/VProgressLinear'\nimport { VWindow } from '@/components/VWindow'\n\n// Composables\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { convertToUnit, defineComponent, useRender } from '@/util'\nimport { onMounted, ref, watch } from 'vue'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { GroupProvide } from '@/composables/group'\n\nexport const VCarousel = defineComponent({\n  name: 'VCarousel',\n\n  props: {\n    color: String,\n    cycle: Boolean,\n    delimiterIcon: {\n      type: String,\n      default: '$delimiter',\n    },\n    height: {\n      type: [Number, String],\n      default: 500,\n    },\n    hideDelimiters: Boolean,\n    hideDelimiterBackground: Boolean,\n    interval: {\n      type: [Number, String],\n      default: 6000,\n      validator: (value: string | number) => value > 0,\n    },\n    modelValue: null,\n    progress: [Boolean, String],\n    showArrows: {\n      type: [Boolean, String],\n      default: true,\n      validator: (v: any) => typeof v === 'boolean' || v === 'hover',\n    },\n    verticalDelimiters: [Boolean, String] as PropType<boolean | 'left' | 'right'>,\n  },\n\n  emits: {\n    'update:modelValue': (val: any) => true,\n  },\n\n  setup (props, { slots }) {\n    const model = useProxiedModel(props, 'modelValue')\n    const { t } = useLocale()\n    const windowRef = ref<typeof VWindow>()\n\n    let slideTimeout = -1\n    watch(model, restartTimeout)\n    watch(() => props.interval, restartTimeout)\n    watch(() => props.cycle, val => {\n      if (val) restartTimeout()\n      else window.clearTimeout(slideTimeout)\n    })\n\n    onMounted(startTimeout)\n\n    function startTimeout () {\n      if (!props.cycle || !windowRef.value) return\n\n      slideTimeout = window.setTimeout(windowRef.value.group.next, +props.interval > 0 ? +props.interval : 6000)\n    }\n\n    function restartTimeout () {\n      window.clearTimeout(slideTimeout)\n      window.requestAnimationFrame(startTimeout)\n    }\n\n    useRender(() => (\n      <VWindow\n        ref={ windowRef }\n        v-model={ model.value }\n        class={[\n          'v-carousel',\n          {\n            'v-carousel--hide-delimiter-background': props.hideDelimiterBackground,\n            'v-carousel--vertical-delimiters': props.verticalDelimiters,\n          },\n        ]}\n        style={{ height: convertToUnit(props.height) }}\n        continuous\n        showArrows={ props.showArrows }\n        mandatory=\"force\"\n      >\n        {{\n          default: slots.default,\n          additional: ({ group }: { group: GroupProvide }) => (\n            <>\n              { !props.hideDelimiters && (\n                <div\n                  class=\"v-carousel__controls\"\n                  style={{\n                    left: props.verticalDelimiters === 'left' && props.verticalDelimiters ? 0 : 'auto',\n                    right: props.verticalDelimiters === 'right' ? 0 : 'auto',\n                  }}\n                >\n                  { group.items.value.length > 0 && (\n                    <VDefaultsProvider\n                      defaults={{\n                        VBtn: {\n                          color: props.color,\n                          icon: props.delimiterIcon,\n                          size: 'x-small',\n                          variant: 'text',\n                        },\n                      }}\n                      scoped\n                    >\n                      { group.items.value.map((item: any) => {\n                        const props = {\n                          'aria-label': t('$vuetify.carousel.ariaLabel.delimiter'),\n                          class: [group.isSelected(item.id) && 'v-btn--selected'],\n                          onClick: () => group.select(item.id, true),\n                        }\n\n                        return slots.item\n                          ? slots.item({ props, item })\n                          : (<VBtn { ...item } { ...props } />)\n                      }) }\n                    </VDefaultsProvider>\n                  ) }\n                </div>\n              )}\n\n              { props.progress && (\n                <VProgressLinear\n                  class=\"v-carousel__progress\"\n                  color={ typeof props.progress === 'string' ? props.progress : undefined }\n                  modelValue={ (group.getItemIndex(model.value) + 1) / group.items.value.length * 100 }\n                />\n              )}\n            </>\n          ),\n          prev: slots.prev,\n          next: slots.next,\n        }}\n      </VWindow>\n    ))\n  },\n})\n"],"file":"VCarousel.mjs"}