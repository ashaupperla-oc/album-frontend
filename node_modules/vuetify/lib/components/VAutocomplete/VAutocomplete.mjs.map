{"version":3,"sources":["../../../src/components/VAutocomplete/VAutocomplete.tsx"],"names":["makeSelectProps","VChip","VDefaultsProvider","VList","VListItem","VMenu","VTextField","makeFilterProps","useFilter","makeTransitionProps","transformItem","useItems","useForwardRef","useLocale","useProxiedModel","computed","nextTick","ref","watch","genericComponent","useRender","wrapInArray","highlightResult","text","matches","length","Array","isArray","Error","substr","VAutocomplete","name","props","search","String","filterKeys","transition","emits","e","val","setup","slots","t","vTextFieldRef","activator","isFocused","isPristine","menu","items","model","v","multiple","filteredItems","value","undefined","selections","array","index","unwrapped","item","found","find","selection","push","selected","map","onClear","openOnClear","onClickControl","hideNoData","onKeydown","includes","key","onInput","target","onAfterLeave","isSelecting","select","findIndex","splice","title","$el","querySelector","hasChips","chips","chip","menuIcon","default","eager","noDataText","preventDefault","onChipClose","stopPropagation","slotProps","modelValue","closable","closableChips","size"],"mappings":"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","sourcesContent":["// Styles\nimport './VAutocomplete.sass'\n\n// Components\nimport { makeSelectProps } from '@/components/VSelect/VSelect'\nimport { VChip } from '@/components/VChip'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VList, VListItem } from '@/components/VList'\nimport { VMenu } from '@/components/VMenu'\nimport { VTextField } from '@/components/VTextField'\n\n// Composables\nimport { makeFilterProps, useFilter } from '@/composables/filter'\nimport { makeTransitionProps } from '@/composables/transition'\nimport { transformItem, useItems } from '@/composables/items'\nimport { useForwardRef } from '@/composables/forwardRef'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utility\nimport { computed, nextTick, ref, watch } from 'vue'\nimport { genericComponent, useRender, wrapInArray } from '@/util'\n\n// Types\nimport type { FilterMatch } from '@/composables/filter'\nimport type { DefaultChipSlot, InternalSelectItem } from '@/components/VSelect/VSelect'\nimport type { MakeSlots } from '@/util'\n\nexport interface InternalAutocompleteItem extends InternalSelectItem {\n\n}\n\nexport interface DefaultAutocompleteSlot {\n  selection: InternalAutocompleteItem\n}\n\nfunction highlightResult (text: string, matches: FilterMatch, length: number) {\n  if (Array.isArray(matches)) throw new Error('Multiple matches is not implemented')\n\n  return typeof matches === 'number' && ~matches\n    ? (\n      <>\n        <span class=\"v-autocomplete__unmask\">{ text.substr(0, matches) }</span>\n        <span class=\"v-autocomplete__mask\">{ text.substr(matches, length) }</span>\n        <span class=\"v-autocomplete__unmask\">{ text.substr(matches + length) }</span>\n      </>\n    )\n    : text\n}\n\nexport const VAutocomplete = genericComponent<new <T>() => {\n  $slots: MakeSlots<{\n    chip: [DefaultChipSlot]\n    default: []\n    selection: [DefaultAutocompleteSlot]\n  }>\n}>()({\n  name: 'VAutocomplete',\n\n  props: {\n    // TODO: implement post keyboard support\n    // autoSelectFirst: Boolean,\n    search: String,\n\n    ...makeFilterProps({ filterKeys: ['title'] }),\n    ...makeSelectProps(),\n    ...makeTransitionProps({ transition: false }),\n  },\n\n  emits: {\n    'click:clear': (e: MouseEvent) => true,\n    'update:search': (val: any) => true,\n    'update:modelValue': (val: any) => true,\n  },\n\n  setup (props, { slots }) {\n    const { t } = useLocale()\n    const vTextFieldRef = ref()\n    const activator = ref()\n    const isFocused = ref(false)\n    const isPristine = ref(true)\n    const menu = ref(false)\n    const { items } = useItems(props)\n    const search = useProxiedModel(props, 'search', '')\n    const model = useProxiedModel(\n      props,\n      'modelValue',\n      [],\n      v => wrapInArray(v || []),\n      (v: any) => props.multiple ? v : v[0]\n    )\n    const { filteredItems } = useFilter(props, items, computed(() => isPristine.value ? undefined : search.value))\n    const selections = computed(() => {\n      const array: InternalSelectItem[] = []\n      let index = 0\n      for (const unwrapped of model.value) {\n        const item = transformItem(props, unwrapped)\n\n        const found = array.find(selection => selection.value === item.value)\n\n        if (found == null) {\n          array.push({\n            ...item,\n            index,\n          })\n\n          index++\n        }\n      }\n\n      return array\n    })\n    const selected = computed(() => selections.value.map(selection => selection.value))\n\n    function onClear (e: MouseEvent) {\n      model.value = []\n\n      if (props.openOnClear) {\n        menu.value = true\n      }\n\n      search.value = ''\n    }\n    function onClickControl () {\n      if (props.hideNoData && !filteredItems.value.length) return\n\n      menu.value = true\n    }\n    function onKeydown (e: KeyboardEvent) {\n      if (['Enter', 'ArrowDown'].includes(e.key)) {\n        menu.value = true\n      }\n\n      if (['Escape'].includes(e.key)) {\n        menu.value = false\n      }\n\n      if (['Enter', 'Escape', 'Tab'].includes(e.key)) {\n        isPristine.value = true\n      }\n    }\n    function onInput (e: InputEvent) {\n      search.value = (e.target as HTMLInputElement).value\n    }\n    function onAfterLeave () {\n      if (isFocused.value) isPristine.value = true\n    }\n    const isSelecting = ref(false)\n    function select (item: any) {\n      if (props.multiple) {\n        const index = selected.value.findIndex(selection => selection === item.value)\n\n        if (index === -1) {\n          model.value = [...model.value, item.value]\n        } else {\n          const value = [...model.value]\n          value.splice(index, 1)\n          model.value = value\n        }\n      } else {\n        model.value = [item.value]\n\n        isSelecting.value = true\n\n        search.value = item.title\n        menu.value = false\n        isPristine.value = true\n\n        nextTick(() => (isSelecting.value = false))\n      }\n    }\n\n    watch(() => vTextFieldRef.value, val => {\n      activator.value = val.$el.querySelector('.v-input__control')\n    })\n\n    watch(isFocused, val => {\n      if (val) {\n        isSelecting.value = true\n        search.value = props.multiple ? '' : String(model.value ?? '')\n        isPristine.value = true\n\n        nextTick(() => isSelecting.value = false)\n      } else {\n        menu.value = false\n        search.value = ''\n      }\n    })\n\n    watch(search, val => {\n      if (!isFocused.value || isSelecting.value) return\n\n      if (val) menu.value = true\n\n      isPristine.value = !val\n    })\n\n    useRender(() => {\n      const hasChips = !!(props.chips || slots.chip)\n\n      return (\n        <VTextField\n          ref={ vTextFieldRef }\n          modelValue={ search.value }\n          onInput={ onInput }\n          class={[\n            'v-autocomplete',\n            {\n              'v-autocomplete--active-menu': menu.value,\n              'v-autocomplete--chips': !!props.chips,\n              [`v-autocomplete--${props.multiple ? 'multiple' : 'single'}`]: true,\n            },\n          ]}\n          appendInnerIcon={ props.menuIcon }\n          dirty={ selected.value.length > 0 }\n          onClick:clear={ onClear }\n          onClick:control={ onClickControl }\n          onClick:input={ onClickControl }\n          onFocus={ () => isFocused.value = true }\n          onBlur={ () => isFocused.value = false }\n          onKeydown={ onKeydown }\n        >\n          {{\n            ...slots,\n            default: () => (\n              <>\n                { activator.value && (\n                  <VMenu\n                    v-model={ menu.value }\n                    activator={ activator.value }\n                    contentClass=\"v-autocomplete__content\"\n                    eager={ props.eager }\n                    openOnClick={ false }\n                    transition={ props.transition }\n                    onAfterLeave={ onAfterLeave }\n                  >\n                    <VList\n                      selected={ selected.value }\n                      selectStrategy={ props.multiple ? 'independent' : 'single-independent' }\n                    >\n                      { !filteredItems.value.length && !props.hideNoData && (slots['no-data']?.() ?? (\n                        <VListItem title={ t(props.noDataText) } />\n                      )) }\n\n                      { filteredItems.value.map(({ item, matches }) => (\n                        <VListItem\n                          value={ item.value }\n                          onMousedown={ (e: MouseEvent) => e.preventDefault() }\n                          onClick={ () => select(item) }\n                        >\n                          {{\n                            title: () => {\n                              return isPristine.value\n                                ? item.title\n                                : highlightResult(item.title, matches.title, search.value?.length ?? 0)\n                            },\n                          }}\n                        </VListItem>\n                      )) }\n                    </VList>\n                  </VMenu>\n                ) }\n                  { selections.value.map((selection, index) => {\n                    function onChipClose (e: Event) {\n                      e.stopPropagation()\n                      e.preventDefault()\n\n                      select(selection)\n                    }\n\n                    const slotProps = {\n                      'onClick:close': onChipClose,\n                      modelValue: true,\n                    }\n\n                    return (\n                      <div class=\"v-autocomplete__selection\">\n                        { hasChips && (\n                          <VDefaultsProvider\n                            defaults={{\n                              VChip: {\n                                closable: props.closableChips,\n                                size: 'small',\n                                text: selection.title,\n                              },\n                            }}\n                          >\n                            { slots.chip\n                              ? slots.chip({ props: slotProps, selection })\n                              : (<VChip { ...slotProps } />)\n                            }\n                          </VDefaultsProvider>\n                        ) }\n\n                        { !hasChips && (\n                          slots.selection\n                            ? slots.selection({ selection })\n                            : (\n                              <span class=\"v-autocomplete__selection-text\">\n                                { selection.title }\n                                { props.multiple && (index < selections.value.length - 1) && (\n                                  <span class=\"v-autocomplete__selection-comma\">,</span>\n                                ) }\n                              </span>\n                            )\n                        ) }\n                      </div>\n                    )\n                  }) }\n              </>\n            ),\n          }}\n        </VTextField>\n      )\n    })\n\n    return useForwardRef({\n      filteredItems,\n    }, vTextFieldRef)\n  },\n})\n\nexport type VAutocomplete = InstanceType<typeof VAutocomplete>\n"],"file":"VAutocomplete.mjs"}