{"version":3,"sources":["../../../src/components/VCombobox/VCombobox.tsx"],"names":["makeSelectProps","VChip","VDefaultsProvider","VList","VListItem","VMenu","VTextField","makeFilterProps","useFilter","makeTransitionProps","transformItem","useItems","useForwardRef","useLocale","useProxiedModel","useTextColor","computed","nextTick","ref","watch","genericComponent","useRender","wrapInArray","highlightResult","text","matches","length","Array","isArray","Error","substr","VCombobox","name","props","delimiters","filterKeys","hideNoData","transition","emits","val","setup","emit","slots","t","vTextFieldRef","activator","isFocused","isPristine","menu","selectionIndex","color","value","items","textColorClasses","textColorStyles","model","v","multiple","_search","search","get","set","values","split","RegExp","join","forEach","trim","select","filteredItems","undefined","selections","array","index","unwrapped","item","found","find","selection","push","selected","map","onClear","e","openOnClear","onClickControl","onKeydown","selectionStart","preventDefault","includes","key","prev","setSelectionRange","next","onInput","target","onAfterLeave","findIndex","splice","title","$el","querySelector","hasChips","chips","chip","menuIcon","default","eager","noDataText","onChipClose","stopPropagation","slotProps","modelValue","closable","closableChips","size"],"mappings":"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","sourcesContent":["// Styles\nimport './VCombobox.sass'\n\n// Components\nimport { makeSelectProps } from '@/components/VSelect/VSelect'\nimport { VChip } from '@/components/VChip'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VList, VListItem } from '@/components/VList'\nimport { VMenu } from '@/components/VMenu'\nimport { VTextField } from '@/components/VTextField'\n\n// Composables\nimport { makeFilterProps, useFilter } from '@/composables/filter'\nimport { makeTransitionProps } from '@/composables/transition'\nimport { transformItem, useItems } from '@/composables/items'\nimport { useForwardRef } from '@/composables/forwardRef'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { useTextColor } from '@/composables/color'\n\n// Utility\nimport { computed, nextTick, ref, watch } from 'vue'\nimport { genericComponent, useRender, wrapInArray } from '@/util'\n\n// Types\nimport type { FilterMatch } from '@/composables/filter'\nimport type { DefaultChipSlot, InternalSelectItem } from '@/components/VSelect/VSelect'\nimport type { MakeSlots } from '@/util'\nimport type { PropType } from 'vue'\n\nexport interface InternalComboboxItem extends InternalSelectItem {\n  selected: boolean\n}\n\nexport interface DefaultComboboxSlot {\n  selection: InternalComboboxItem\n}\n\nfunction highlightResult (text: string, matches: FilterMatch, length: number) {\n  if (Array.isArray(matches)) throw new Error('Multiple matches is not implemented')\n\n  return typeof matches === 'number' && ~matches\n    ? (\n      <>\n        <span class=\"v-combobox__unmask\">{ text.substr(0, matches) }</span>\n        <span class=\"v-combobox__mask\">{ text.substr(matches, length) }</span>\n        <span class=\"v-combobox__unmask\">{ text.substr(matches + length) }</span>\n      </>\n    )\n    : text\n}\n\nexport const VCombobox = genericComponent<new <T>() => {\n  $slots: MakeSlots<{\n    chip: [DefaultChipSlot]\n    default: []\n    selection: [DefaultComboboxSlot]\n  }>\n}>()({\n  name: 'VCombobox',\n\n  props: {\n    // TODO: implement post keyboard support\n    // autoSelectFirst: Boolean,\n    delimiters: Array as PropType<string[]>,\n\n    ...makeFilterProps({ filterKeys: ['title'] }),\n    ...makeSelectProps({ hideNoData: true }),\n    ...makeTransitionProps({ transition: false }),\n  },\n\n  emits: {\n    'update:modelValue': (val: any) => true,\n    'update:searchInput': (val: string) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const { t } = useLocale()\n    const vTextFieldRef = ref()\n    const activator = ref()\n    const isFocused = ref(false)\n    const isPristine = ref(true)\n    const menu = ref(false)\n    const selectionIndex = ref(-1)\n    const color = computed(() => vTextFieldRef.value?.color)\n    const { items } = useItems(props)\n    const { textColorClasses, textColorStyles } = useTextColor(color)\n    const model = useProxiedModel(\n      props,\n      'modelValue',\n      [],\n      v => wrapInArray(v || []),\n      (v: any) => props.multiple ? v : v[0]\n    )\n    const _search = ref('')\n    const search = computed<string>({\n      get: () => props.multiple ? _search.value : transformItem(props, model.value[0]).value,\n      set: val => {\n        if (props.multiple) {\n          _search.value = val\n        } else {\n          model.value = [val]\n        }\n\n        if (val && props.multiple && props.delimiters?.length) {\n          const values = val.split(new RegExp(`(?:${props.delimiters.join('|')})+`))\n          if (values.length > 1) {\n            values.forEach(v => {\n              v = v.trim()\n              if (v) select({ value: v })\n            })\n            _search.value = ''\n          }\n        }\n\n        if (!val) selectionIndex.value = -1\n        if (isFocused.value) menu.value = true\n\n        isPristine.value = !val\n      },\n    })\n    watch(_search, value => {\n      emit('update:searchInput', value)\n    })\n\n    const { filteredItems } = useFilter(props, items, computed(() => isPristine.value ? undefined : search.value))\n\n    const selections = computed(() => {\n      const array: InternalComboboxItem[] = []\n      let index = 0\n      for (const unwrapped of model.value) {\n        const item = transformItem(props, unwrapped)\n\n        const found = array.find(selection => selection.value === item.value)\n\n        if (found == null) {\n          array.push({\n            ...item,\n            index,\n            selected: index === selectionIndex.value,\n          })\n\n          index++\n        }\n      }\n\n      return array\n    })\n    const selected = computed(() => selections.value.map(selection => selection.value))\n    const selection = computed(() => selections.value[selectionIndex.value])\n\n    function onClear (e: MouseEvent) {\n      model.value = []\n\n      if (props.openOnClear) {\n        menu.value = true\n      }\n    }\n    function onClickControl () {\n      if (props.hideNoData && !filteredItems.value.length) return\n\n      menu.value = true\n    }\n    function onKeydown (e: KeyboardEvent) {\n      const selectionStart = vTextFieldRef.value.selectionStart\n      const length = selected.value.length\n\n      if (selectionIndex.value > -1) e.preventDefault()\n\n      if (['Enter', 'ArrowDown'].includes(e.key)) {\n        menu.value = true\n      }\n\n      if (['Escape'].includes(e.key)) {\n        menu.value = false\n      }\n\n      if (['Enter', 'Escape', 'Tab'].includes(e.key)) {\n        isPristine.value = true\n      }\n\n      if (!props.multiple) return\n\n      if (['Backspace', 'Delete'].includes(e.key)) {\n        if (selectionIndex.value < 0) {\n          if (e.key === 'Backspace' && !search.value) {\n            selectionIndex.value = length - 1\n          }\n\n          return\n        }\n\n        select(selection.value)\n\n        nextTick(() => !selection.value && (selectionIndex.value = length - 2))\n      }\n\n      if (e.key === 'ArrowLeft') {\n        if (selectionIndex.value < 0 && selectionStart > 0) return\n\n        const prev = selectionIndex.value > -1\n          ? selectionIndex.value - 1\n          : length - 1\n\n        if (selections.value[prev]) {\n          selectionIndex.value = prev\n        } else {\n          selectionIndex.value = -1\n          vTextFieldRef.value.setSelectionRange(search.value.length, search.value.length)\n        }\n      }\n\n      if (e.key === 'ArrowRight') {\n        if (selectionIndex.value < 0) return\n\n        const next = selectionIndex.value + 1\n\n        if (selections.value[next]) {\n          selectionIndex.value = next\n        } else {\n          selectionIndex.value = -1\n          vTextFieldRef.value.setSelectionRange(0, 0)\n        }\n      }\n\n      if (e.key === 'Enter') {\n        select({ value: search.value })\n        search.value = ''\n      }\n    }\n    function onInput (e: InputEvent) {\n      search.value = (e.target as HTMLInputElement).value\n    }\n    function onAfterLeave () {\n      if (isFocused.value) isPristine.value = true\n    }\n    function select (item: any) {\n      if (props.multiple) {\n        const index = selected.value.findIndex(selection => selection === item.value)\n\n        if (index === -1) {\n          model.value = [...model.value, item.value]\n        } else {\n          const value = [...model.value]\n          value.splice(index, 1)\n          model.value = value\n        }\n\n        search.value = ''\n      } else {\n        search.value = item.title\n\n        // watch for search watcher to trigger\n        nextTick(() => {\n          menu.value = false\n          isPristine.value = true\n        })\n      }\n    }\n\n    watch(() => vTextFieldRef.value, val => {\n      activator.value = val.$el.querySelector('.v-input__control')\n    })\n\n    watch(filteredItems, val => {\n      if (!val.length && props.hideNoData) menu.value = false\n    })\n\n    watch(isFocused, val => {\n      if (val) {\n        selectionIndex.value = -1\n      } else {\n        menu.value = false\n\n        if (!props.multiple || !search.value) return\n\n        model.value = [...model.value, search.value]\n        search.value = ''\n      }\n    })\n\n    useRender(() => {\n      const hasChips = !!(props.chips || slots.chip)\n\n      return (\n        <VTextField\n          ref={ vTextFieldRef }\n          modelValue={ search.value }\n          onInput={ onInput }\n          class={[\n            'v-combobox',\n            {\n              'v-combobox--active-menu': menu.value,\n              'v-combobox--chips': !!props.chips,\n              'v-combobox--selecting-index': selectionIndex.value > -1,\n              [`v-combobox--${props.multiple ? 'multiple' : 'single'}`]: true,\n            },\n          ]}\n          appendInnerIcon={ props.items.length ? props.menuIcon : undefined }\n          dirty={ selected.value.length > 0 }\n          onClick:clear={ onClear }\n          onClick:control={ onClickControl }\n          onClick:input={ onClickControl }\n          onFocus={ () => isFocused.value = true }\n          onBlur={ () => isFocused.value = false }\n          onKeydown={ onKeydown }\n        >\n          {{\n            ...slots,\n            default: () => (\n              <>\n                { activator.value && (\n                  <VMenu\n                    v-model={ menu.value }\n                    activator={ activator.value }\n                    contentClass=\"v-combobox__content\"\n                    eager={ props.eager }\n                    openOnClick={ false }\n                    transition={ props.transition }\n                    onAfterLeave={ onAfterLeave }\n                  >\n                    <VList\n                      selected={ selected.value }\n                      selectStrategy={ props.multiple ? 'independent' : 'single-independent' }\n                    >\n                      { !filteredItems.value.length && !props.hideNoData && (slots['no-data']?.() ?? (\n                        <VListItem title={ t(props.noDataText) } />\n                      )) }\n\n                      { filteredItems.value.map(({ item, matches }) => (\n                        <VListItem\n                          value={ item.value }\n                          onMousedown={ (e: MouseEvent) => e.preventDefault() }\n                          onClick={ () => select(item) }\n                        >\n                          {{\n                            title: () => {\n                              return isPristine.value\n                                ? item.title\n                                : highlightResult(item.title, matches.title, search.value?.length ?? 0)\n                            },\n                          }}\n                        </VListItem>\n                      )) }\n                    </VList>\n                  </VMenu>\n                ) }\n\n                { selections.value.map((selection, index) => {\n                  function onChipClose (e: Event) {\n                    e.stopPropagation()\n                    e.preventDefault()\n\n                    select(selection)\n                  }\n\n                  const slotProps = {\n                    'onClick:close': onChipClose,\n                    modelValue: true,\n                  }\n\n                  return (\n                    <div\n                      class={[\n                        'v-combobox__selection',\n                        selection.selected && [\n                          'v-combobox__selection--selected',\n                          textColorClasses.value,\n                        ],\n                      ]}\n                      style={ selection.selected ? textColorStyles.value : {} }\n                    >\n                      { hasChips && (\n                        <VDefaultsProvider\n                          defaults={{\n                            VChip: {\n                              closable: props.closableChips,\n                              size: 'small',\n                              text: selection.title,\n                            },\n                          }}\n                        >\n                          { slots.chip\n                            ? slots.chip({ props: slotProps, selection })\n                            : (<VChip { ...slotProps } />)\n                          }\n                        </VDefaultsProvider>\n                      ) }\n\n                      { !hasChips && (\n                        slots.selection\n                          ? slots.selection({ selection })\n                          : (\n                            <span class=\"v-combobox__selection-text\">\n                              { selection.title }\n                              { props.multiple && (index < selections.value.length - 1) && (\n                                <span class=\"v-combobox__selection-comma\">,</span>\n                              ) }\n                            </span>\n                          )\n                      ) }\n                    </div>\n                  )\n                }) }\n              </>\n            ),\n          }}\n        </VTextField>\n      )\n    })\n\n    return useForwardRef({\n      isFocused,\n      isPristine,\n      menu,\n      search,\n      selectionIndex,\n      filteredItems,\n      select,\n    }, vTextFieldRef)\n  },\n})\n\nexport type VCombobox = InstanceType<typeof VCombobox>\n"],"file":"VCombobox.mjs"}