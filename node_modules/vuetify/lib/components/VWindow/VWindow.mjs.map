{"version":3,"sources":["../../../src/components/VWindow/VWindow.tsx"],"names":["VBtn","makeTagProps","makeThemeProps","provideTheme","useGroup","useLocale","useRtl","Touch","computed","provide","ref","watch","genericComponent","useRender","VWindowSymbol","Symbol","for","VWindowGroupSymbol","VWindow","name","directives","props","continuous","Boolean","nextIcon","type","String","default","prevIcon","reverse","showArrows","validator","v","touch","Object","undefined","direction","modelValue","disabled","selectedClass","mandatory","emits","setup","slots","themeClasses","isRtl","t","group","rootRef","isRtlReverse","value","isReversed","transition","axis","transitionCount","transitionHeight","activeIndex","items","findIndex","item","selected","includes","id","newVal","oldVal","itemsLength","length","lastIndex","canMoveBack","canMoveForward","prev","next","arrows","prevProps","icon","class","onClick","ariaLabel","push","nextProps","touchOptions","options","left","right","end","originalEvent","stopPropagation","start","height","additional"],"mappings":"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","sourcesContent":["// Styles\nimport './VWindow.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\n\n// Composables\nimport { makeTagProps } from '@/composables/tag'\nimport { makeThemeProps, provideTheme } from '@/composables/theme'\nimport { useGroup } from '@/composables/group'\nimport { useLocale } from '@/composables/locale'\nimport { useRtl } from '@/composables/rtl'\n\n// Directives\nimport { Touch } from '@/directives/touch'\n\n// Utilities\nimport { computed, provide, ref, watch } from 'vue'\nimport { genericComponent, useRender } from '@/util'\n\n// Types\nimport type { ComputedRef, InjectionKey, PropType, Ref } from 'vue'\nimport type { GroupItemProvide, GroupProvide } from '@/composables/group'\nimport type { TouchHandlers } from '@/directives/touch'\nimport type { MakeSlots } from '@/util'\n\ntype WindowProvide = {\n  transition: ComputedRef<undefined | string>\n  transitionCount: Ref<number>\n  transitionHeight: Ref<undefined | string>\n  isReversed: Ref<boolean>\n  rootRef: Ref<HTMLElement | undefined>\n}\n\ntype ControlProps = {\n  icon: string\n  class: string\n  onClick: () => void\n  ariaLabel: string\n}\n\nexport const VWindowSymbol: InjectionKey<WindowProvide> = Symbol.for('vuetify:v-window')\nexport const VWindowGroupSymbol: InjectionKey<GroupItemProvide> = Symbol.for('vuetify:v-window-group')\n\nexport const VWindow = genericComponent<new () => {\n  $slots: MakeSlots<{\n    default: [{ group: GroupProvide }]\n    additional: [{ group: GroupProvide }]\n    prev: [{ props: ControlProps }]\n    next: [{ props: ControlProps }]\n  }>\n}>()({\n  name: 'VWindow',\n\n  directives: {\n    Touch,\n  },\n\n  props: {\n    continuous: Boolean,\n    nextIcon: {\n      type: [Boolean, String],\n      default: '$next',\n    },\n    prevIcon: {\n      type: [Boolean, String],\n      default: '$prev',\n    },\n    reverse: Boolean,\n    showArrows: {\n      type: [Boolean, String],\n      validator: (v: any) => typeof v === 'boolean' || v === 'hover',\n    },\n    touch: {\n      type: [Object, Boolean] as PropType<boolean | TouchHandlers>,\n      default: undefined,\n    },\n    direction: {\n      type: String,\n      default: 'horizontal',\n    },\n\n    modelValue: null,\n    disabled: Boolean,\n    selectedClass: {\n      type: String,\n      default: 'v-window-item--active',\n    },\n    // TODO: mandatory should probably not be exposed but do this for now\n    mandatory: {\n      default: 'force' as const,\n    },\n\n    ...makeTagProps(),\n    ...makeThemeProps(),\n  },\n\n  emits: {\n    'update:modelValue': (v: any) => true,\n  },\n\n  setup (props, { slots }) {\n    const { themeClasses } = provideTheme(props)\n    const { isRtl } = useRtl()\n    const { t } = useLocale()\n\n    const group = useGroup(props, VWindowGroupSymbol)\n\n    const rootRef = ref()\n    const isRtlReverse = computed(() => isRtl.value ? !props.reverse : props.reverse)\n    const isReversed = ref(false)\n    const transition = computed(() => {\n      const axis = props.direction === 'vertical' ? 'y' : 'x'\n      const reverse = isRtlReverse.value ? !isReversed.value : isReversed.value\n      const direction = reverse ? '-reverse' : ''\n\n      return `v-window-${axis}${direction}-transition`\n    })\n    const transitionCount = ref(0)\n    const transitionHeight = ref<undefined | string>(undefined)\n\n    const activeIndex = computed(() => {\n      return group.items.value.findIndex(item => group.selected.value.includes(item.id))\n    })\n\n    watch(activeIndex, (newVal, oldVal) => {\n      const itemsLength = group.items.value.length\n      const lastIndex = itemsLength - 1\n\n      if (itemsLength <= 2) {\n        isReversed.value = newVal < oldVal\n      } else if (newVal === lastIndex && oldVal === 0) {\n        isReversed.value = true\n      } else if (newVal === 0 && oldVal === lastIndex) {\n        isReversed.value = false\n      } else {\n        isReversed.value = newVal < oldVal\n      }\n    })\n\n    provide(VWindowSymbol, {\n      transition,\n      isReversed,\n      transitionCount,\n      transitionHeight,\n      rootRef,\n    })\n\n    const canMoveBack = computed(() => props.continuous || activeIndex.value !== 0)\n    const canMoveForward = computed(() => props.continuous || activeIndex.value !== group.items.value.length - 1)\n\n    function prev () {\n      canMoveBack.value && group.prev()\n    }\n\n    function next () {\n      canMoveForward.value && group.next()\n    }\n\n    const arrows = computed(() => {\n      const arrows = []\n\n      const prevProps = {\n        icon: isRtl.value ? props.nextIcon : props.prevIcon,\n        class: `v-window__${isRtlReverse.value ? 'right' : 'left'}`,\n        onClick: group.prev,\n        ariaLabel: t('$vuetify.carousel.prev'),\n      }\n\n      arrows.push(canMoveBack.value\n        ? slots.prev\n          ? slots.prev({ props: prevProps })\n          : <VBtn { ...prevProps } />\n        : <div />\n      )\n\n      const nextProps = {\n        icon: isRtl.value ? props.prevIcon : props.nextIcon,\n        class: `v-window__${isRtlReverse.value ? 'left' : 'right'}`,\n        onClick: group.next,\n        ariaLabel: t('$vuetify.carousel.next'),\n      }\n\n      arrows.push(canMoveForward.value\n        ? slots.next\n          ? slots.next({ props: nextProps })\n          : <VBtn { ...nextProps } />\n        : <div />\n      )\n\n      return arrows\n    })\n\n    const touchOptions = computed(() => {\n      if (props.touch === false) return props.touch\n\n      const options: TouchHandlers = {\n        left: () => {\n          isRtlReverse.value ? prev() : next()\n        },\n        right: () => {\n          isRtlReverse.value ? next() : prev()\n        },\n        end: ({ originalEvent }) => {\n          originalEvent.stopPropagation()\n        },\n        start: ({ originalEvent }) => {\n          originalEvent.stopPropagation()\n        },\n      }\n\n      return {\n        ...options,\n        ...(props.touch === true ? {} : props.touch),\n      }\n    })\n\n    useRender(() => (\n      <props.tag\n        ref={ rootRef }\n        class={[\n          'v-window',\n          {\n            'v-window--show-arrows-on-hover': props.showArrows === 'hover',\n          },\n          themeClasses.value,\n        ]}\n        v-touch={ touchOptions.value }\n      >\n        <div\n          class=\"v-window__container\"\n          style={{\n            height: transitionHeight.value,\n          }}\n        >\n          { slots.default?.({ group }) }\n\n          { props.showArrows !== false && (\n            <div class=\"v-window__controls\">\n              { arrows.value }\n            </div>\n          )}\n        </div>\n\n        { slots.additional?.({ group }) }\n      </props.tag>\n    ))\n\n    return {\n      group,\n    }\n  },\n})\n\nexport type VWindow = InstanceType<typeof VWindow>\n"],"file":"VWindow.mjs"}